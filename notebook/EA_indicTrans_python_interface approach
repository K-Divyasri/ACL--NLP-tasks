{"cells":[{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"CjfzxXZLHed_","outputId":"9acc43c7-02cd-4b47-a28f-9944a7b74107","executionInfo":{"status":"ok","timestamp":1664197860700,"user_tz":-330,"elapsed":10153,"user":{"displayName":"Krithika Swaminathan","userId":"06780295584669090751"}}},"outputs":[{"output_type":"stream","name":"stdout","text":["Cloning into 'indicTrans'...\n","remote: Enumerating objects: 683, done.\u001b[K\n","remote: Counting objects: 100% (386/386), done.\u001b[K\n","remote: Compressing objects: 100% (194/194), done.\u001b[K\n","remote: Total 683 (delta 265), reused 266 (delta 190), pack-reused 297\u001b[K\n","Receiving objects: 100% (683/683), 2.65 MiB | 4.67 MiB/s, done.\n","Resolving deltas: 100% (392/392), done.\n","/content/indicTrans\n","Cloning into 'indic_nlp_library'...\n","remote: Enumerating objects: 1325, done.\u001b[K\n","remote: Counting objects: 100% (107/107), done.\u001b[K\n","remote: Compressing objects: 100% (25/25), done.\u001b[K\n","remote: Total 1325 (delta 91), reused 82 (delta 82), pack-reused 1218\u001b[K\n","Receiving objects: 100% (1325/1325), 9.55 MiB | 14.42 MiB/s, done.\n","Resolving deltas: 100% (701/701), done.\n","Cloning into 'indic_nlp_resources'...\n","remote: Enumerating objects: 139, done.\u001b[K\n","remote: Counting objects: 100% (13/13), done.\u001b[K\n","remote: Compressing objects: 100% (13/13), done.\u001b[K\n","remote: Total 139 (delta 2), reused 2 (delta 0), pack-reused 126\u001b[K\n","Receiving objects: 100% (139/139), 149.77 MiB | 40.92 MiB/s, done.\n","Resolving deltas: 100% (53/53), done.\n","Checking out files: 100% (28/28), done.\n","Cloning into 'subword-nmt'...\n","remote: Enumerating objects: 597, done.\u001b[K\n","remote: Counting objects: 100% (21/21), done.\u001b[K\n","remote: Compressing objects: 100% (17/17), done.\u001b[K\n","remote: Total 597 (delta 8), reused 12 (delta 4), pack-reused 576\u001b[K\n","Receiving objects: 100% (597/597), 252.23 KiB | 773.00 KiB/s, done.\n","Resolving deltas: 100% (357/357), done.\n","/content\n"]}],"source":["# clone the repo for running evaluation\n","!git clone https://github.com/AI4Bharat/indicTrans.git\n","%cd indicTrans\n","# clone requirements repositories\n","!git clone https://github.com/anoopkunchukuttan/indic_nlp_library.git\n","!git clone https://github.com/anoopkunchukuttan/indic_nlp_resources.git\n","!git clone https://github.com/rsennrich/subword-nmt.git\n","%cd .."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"IeYW2BJhlJvx","outputId":"011d2158-805c-4c97-967d-cf5ea60f6516","executionInfo":{"status":"ok","timestamp":1664198129295,"user_tz":-330,"elapsed":268600,"user":{"displayName":"Krithika Swaminathan","userId":"06780295584669090751"}}},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Collecting sacremoses\n","  Downloading sacremoses-0.0.53.tar.gz (880 kB)\n","\u001b[K     |████████████████████████████████| 880 kB 3.3 MB/s \n","\u001b[?25hRequirement already satisfied: pandas in /usr/local/lib/python3.7/dist-packages (1.3.5)\n","Collecting mock\n","  Downloading mock-4.0.3-py3-none-any.whl (28 kB)\n","Collecting sacrebleu\n","  Downloading sacrebleu-2.2.1-py3-none-any.whl (116 kB)\n","\u001b[K     |████████████████████████████████| 116 kB 10.2 MB/s \n","\u001b[?25hCollecting tensorboardX\n","  Downloading tensorboardX-2.5.1-py2.py3-none-any.whl (125 kB)\n","\u001b[K     |████████████████████████████████| 125 kB 10.4 MB/s \n","\u001b[?25hRequirement already satisfied: pyarrow in /usr/local/lib/python3.7/dist-packages (6.0.1)\n","Collecting indic-nlp-library\n","  Downloading indic_nlp_library-0.81-py3-none-any.whl (40 kB)\n","\u001b[K     |████████████████████████████████| 40 kB 5.8 MB/s \n","\u001b[?25hRequirement already satisfied: regex in /usr/local/lib/python3.7/dist-packages (from sacremoses) (2022.6.2)\n","Requirement already satisfied: six in /usr/local/lib/python3.7/dist-packages (from sacremoses) (1.15.0)\n","Requirement already satisfied: click in /usr/local/lib/python3.7/dist-packages (from sacremoses) (7.1.2)\n","Requirement already satisfied: joblib in /usr/local/lib/python3.7/dist-packages (from sacremoses) (1.1.0)\n","Requirement already satisfied: tqdm in /usr/local/lib/python3.7/dist-packages (from sacremoses) (4.64.1)\n","Requirement already satisfied: python-dateutil>=2.7.3 in /usr/local/lib/python3.7/dist-packages (from pandas) (2.8.2)\n","Requirement already satisfied: pytz>=2017.3 in /usr/local/lib/python3.7/dist-packages (from pandas) (2022.2.1)\n","Requirement already satisfied: numpy>=1.17.3 in /usr/local/lib/python3.7/dist-packages (from pandas) (1.21.6)\n","Collecting portalocker\n","  Downloading portalocker-2.5.1-py2.py3-none-any.whl (15 kB)\n","Collecting colorama\n","  Downloading colorama-0.4.5-py2.py3-none-any.whl (16 kB)\n","Requirement already satisfied: tabulate>=0.8.9 in /usr/local/lib/python3.7/dist-packages (from sacrebleu) (0.8.10)\n","Requirement already satisfied: lxml in /usr/local/lib/python3.7/dist-packages (from sacrebleu) (4.9.1)\n","Requirement already satisfied: protobuf<=3.20.1,>=3.8.0 in /usr/local/lib/python3.7/dist-packages (from tensorboardX) (3.17.3)\n","Collecting morfessor\n","  Downloading Morfessor-2.0.6-py3-none-any.whl (35 kB)\n","Collecting sphinx-rtd-theme\n","  Downloading sphinx_rtd_theme-1.0.0-py2.py3-none-any.whl (2.8 MB)\n","\u001b[K     |████████████████████████████████| 2.8 MB 15.7 MB/s \n","\u001b[?25hCollecting sphinx-argparse\n","  Downloading sphinx_argparse-0.3.1-py2.py3-none-any.whl (12 kB)\n","Requirement already satisfied: sphinx>=1.2.0 in /usr/local/lib/python3.7/dist-packages (from sphinx-argparse->indic-nlp-library) (1.8.6)\n","Requirement already satisfied: docutils<0.18,>=0.11 in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (0.17.1)\n","Requirement already satisfied: Pygments>=2.0 in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (2.6.1)\n","Requirement already satisfied: setuptools in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (57.4.0)\n","Requirement already satisfied: babel!=2.0,>=1.3 in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (2.10.3)\n","Requirement already satisfied: requests>=2.0.0 in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (2.23.0)\n","Requirement already satisfied: alabaster<0.8,>=0.7 in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (0.7.12)\n","Requirement already satisfied: packaging in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (21.3)\n","Requirement already satisfied: sphinxcontrib-websupport in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (1.2.4)\n","Requirement already satisfied: imagesize in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (1.4.1)\n","Requirement already satisfied: Jinja2>=2.3 in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (2.11.3)\n","Requirement already satisfied: snowballstemmer>=1.1 in /usr/local/lib/python3.7/dist-packages (from sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (2.2.0)\n","Requirement already satisfied: MarkupSafe>=0.23 in /usr/local/lib/python3.7/dist-packages (from Jinja2>=2.3->sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (2.0.1)\n","Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /usr/local/lib/python3.7/dist-packages (from requests>=2.0.0->sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (1.24.3)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.7/dist-packages (from requests>=2.0.0->sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (2022.6.15)\n","Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.7/dist-packages (from requests>=2.0.0->sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (2.10)\n","Requirement already satisfied: chardet<4,>=3.0.2 in /usr/local/lib/python3.7/dist-packages (from requests>=2.0.0->sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (3.0.4)\n","Requirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in /usr/local/lib/python3.7/dist-packages (from packaging->sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (3.0.9)\n","Requirement already satisfied: sphinxcontrib-serializinghtml in /usr/local/lib/python3.7/dist-packages (from sphinxcontrib-websupport->sphinx>=1.2.0->sphinx-argparse->indic-nlp-library) (1.1.5)\n","Building wheels for collected packages: sacremoses\n","  Building wheel for sacremoses (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for sacremoses: filename=sacremoses-0.0.53-py3-none-any.whl size=895260 sha256=3201204c9162749194ea41592d6715d322d83d4ea4725225a50b095b7f66ecb2\n","  Stored in directory: /root/.cache/pip/wheels/87/39/dd/a83eeef36d0bf98e7a4d1933a4ad2d660295a40613079bafc9\n","Successfully built sacremoses\n","Installing collected packages: sphinx-rtd-theme, sphinx-argparse, portalocker, morfessor, colorama, tensorboardX, sacremoses, sacrebleu, mock, indic-nlp-library\n","Successfully installed colorama-0.4.5 indic-nlp-library-0.81 mock-4.0.3 morfessor-2.0.6 portalocker-2.5.1 sacrebleu-2.2.1 sacremoses-0.0.53 sphinx-argparse-0.3.1 sphinx-rtd-theme-1.0.0 tensorboardX-2.5.1\n","Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Collecting mosestokenizer\n","  Downloading mosestokenizer-1.2.1.tar.gz (37 kB)\n","Collecting subword-nmt\n","  Downloading subword_nmt-0.3.8-py3-none-any.whl (27 kB)\n","Collecting docopt\n","  Downloading docopt-0.6.2.tar.gz (25 kB)\n","Collecting openfile\n","  Downloading openfile-0.0.7-py3-none-any.whl (2.4 kB)\n","Collecting uctools\n","  Downloading uctools-1.3.0.tar.gz (4.6 kB)\n","Collecting toolwrapper\n","  Downloading toolwrapper-2.1.0.tar.gz (3.2 kB)\n","Requirement already satisfied: tqdm in /usr/local/lib/python3.7/dist-packages (from subword-nmt) (4.64.1)\n","Requirement already satisfied: mock in /usr/local/lib/python3.7/dist-packages (from subword-nmt) (4.0.3)\n","Building wheels for collected packages: mosestokenizer, docopt, toolwrapper, uctools\n","  Building wheel for mosestokenizer (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for mosestokenizer: filename=mosestokenizer-1.2.1-py3-none-any.whl size=49189 sha256=5278975fe76311efad60375587b333386247169c0bda6999aea0aa1e3db6a1a1\n","  Stored in directory: /root/.cache/pip/wheels/b0/35/f7/af1258779a0b890abc3c79481460c597cb1f3659d0603cfb9d\n","  Building wheel for docopt (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for docopt: filename=docopt-0.6.2-py2.py3-none-any.whl size=13723 sha256=d138c01b7666eb0f05430c84f55e202f7e95aeaf0d3b84059c1a9e8702858c39\n","  Stored in directory: /root/.cache/pip/wheels/72/b0/3f/1d95f96ff986c7dfffe46ce2be4062f38ebd04b506c77c81b9\n","  Building wheel for toolwrapper (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for toolwrapper: filename=toolwrapper-2.1.0-py3-none-any.whl size=3353 sha256=5a8f5cc68cc9c6139853535d9c0be128248076f674d0eb3fe903d92578a86c00\n","  Stored in directory: /root/.cache/pip/wheels/c5/4f/33/54741ffe08e38ececb1d28068a153729b4fe820bafa0a0691f\n","  Building wheel for uctools (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for uctools: filename=uctools-1.3.0-py3-none-any.whl size=6161 sha256=e4501f288179d6de2e4d0e927bcc93d29182bc34172d233fcf7be83a12b7ad9f\n","  Stored in directory: /root/.cache/pip/wheels/fb/44/e9/914cf8fa71f0141f9314f862538d1218fcf2b94542a0fb7d35\n","Successfully built mosestokenizer docopt toolwrapper uctools\n","Installing collected packages: uctools, toolwrapper, openfile, docopt, subword-nmt, mosestokenizer\n","Successfully installed docopt-0.6.2 mosestokenizer-1.2.1 openfile-0.0.7 subword-nmt-0.3.8 toolwrapper-2.1.0 uctools-1.3.0\n","Cloning into 'fairseq'...\n","remote: Enumerating objects: 32730, done.\u001b[K\n","remote: Counting objects: 100% (153/153), done.\u001b[K\n","remote: Compressing objects: 100% (80/80), done.\u001b[K\n","remote: Total 32730 (delta 92), reused 104 (delta 72), pack-reused 32577\u001b[K\n","Receiving objects: 100% (32730/32730), 22.64 MiB | 30.34 MiB/s, done.\n","Resolving deltas: 100% (23981/23981), done.\n","/content/fairseq\n","Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Processing /content/fairseq\n","\u001b[33m  DEPRECATION: A future pip version will change local packages to be built in-place without first copying to a temporary directory. We recommend you use --use-feature=in-tree-build to test your packages with this new behavior before it becomes the default.\n","   pip 21.3 will remove support for this functionality. You can find discussion regarding this at https://github.com/pypa/pip/issues/7555.\u001b[0m\n","  Installing build dependencies ... \u001b[?25l\u001b[?25herror\n","\u001b[33mWARNING: Discarding file:///content/fairseq. Command errored out with exit status 1: /usr/bin/python3 /tmp/pip-standalone-pip-2obtkzjh/__env_pip__.zip/pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-18r6dwsh/overlay --no-warn-script-location -v --no-binary :none: --only-binary :none: -i https://pypi.org/simple --extra-index-url https://us-python.pkg.dev/colab-wheels/public/simple/ -- 'setuptools>=18.0' wheel cython 'numpy>=1.23.3' 'torch>=1.10' Check the logs for full command output.\u001b[0m\n","\u001b[31mERROR: Command errored out with exit status 1: /usr/bin/python3 /tmp/pip-standalone-pip-2obtkzjh/__env_pip__.zip/pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-18r6dwsh/overlay --no-warn-script-location -v --no-binary :none: --only-binary :none: -i https://pypi.org/simple --extra-index-url https://us-python.pkg.dev/colab-wheels/public/simple/ -- 'setuptools>=18.0' wheel cython 'numpy>=1.23.3' 'torch>=1.10' Check the logs for full command output.\u001b[0m\n","Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Collecting xformers\n","  Downloading xformers-0.0.12.tar.gz (232 kB)\n","\u001b[K     |████████████████████████████████| 232 kB 5.0 MB/s \n","\u001b[?25hRequirement already satisfied: torch>=1.12 in /usr/local/lib/python3.7/dist-packages (from xformers) (1.12.1+cu113)\n","Requirement already satisfied: numpy in /usr/local/lib/python3.7/dist-packages (from xformers) (1.21.6)\n","Collecting pyre-extensions==0.0.23\n","  Downloading pyre_extensions-0.0.23-py3-none-any.whl (11 kB)\n","Collecting typing-inspect\n","  Downloading typing_inspect-0.8.0-py3-none-any.whl (8.7 kB)\n","Requirement already satisfied: typing-extensions in /usr/local/lib/python3.7/dist-packages (from pyre-extensions==0.0.23->xformers) (4.1.1)\n","Collecting mypy-extensions>=0.3.0\n","  Downloading mypy_extensions-0.4.3-py2.py3-none-any.whl (4.5 kB)\n","Building wheels for collected packages: xformers\n","  Building wheel for xformers (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for xformers: filename=xformers-0.0.12-cp37-cp37m-linux_x86_64.whl size=6131906 sha256=862d944d1feed515df314185c5f8d6629b332a07bf173e8bfcce7ac31951a9d7\n","  Stored in directory: /root/.cache/pip/wheels/4c/e4/90/9c1105aad7ecc03f37440cfd4d1784ce669072dc9c20f09866\n","Successfully built xformers\n","Installing collected packages: mypy-extensions, typing-inspect, pyre-extensions, xformers\n","Successfully installed mypy-extensions-0.4.3 pyre-extensions-0.0.23 typing-inspect-0.8.0 xformers-0.0.12\n","/content\n"]}],"source":["# Install the necessary libraries\n","!pip install sacremoses pandas mock sacrebleu tensorboardX pyarrow indic-nlp-library\n","! pip install mosestokenizer subword-nmt\n","# Install fairseq from source\n","!git clone https://github.com/pytorch/fairseq.git\n","%cd fairseq\n","# !git checkout da9eaba12d82b9bfc1442f0e2c6fc1b895f4d35d\n","!pip install ./\n","! pip install xformers\n","%cd .."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"TktUu9NW_PLq","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1664198138334,"user_tz":-330,"elapsed":9052,"user":{"displayName":"Krithika Swaminathan","userId":"06780295584669090751"}},"outputId":"c513bad7-c820-4280-ee09-a89f87d4f03b"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Collecting fairseq\n","  Downloading fairseq-0.12.2-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.whl (11.0 MB)\n","\u001b[K     |████████████████████████████████| 11.0 MB 5.1 MB/s \n","\u001b[?25hRequirement already satisfied: torch in /usr/local/lib/python3.7/dist-packages (from fairseq) (1.12.1+cu113)\n","Collecting bitarray\n","  Downloading bitarray-2.6.0-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (235 kB)\n","\u001b[K     |████████████████████████████████| 235 kB 62.3 MB/s \n","\u001b[?25hRequirement already satisfied: tqdm in /usr/local/lib/python3.7/dist-packages (from fairseq) (4.64.1)\n","Requirement already satisfied: regex in /usr/local/lib/python3.7/dist-packages (from fairseq) (2022.6.2)\n","Requirement already satisfied: sacrebleu>=1.4.12 in /usr/local/lib/python3.7/dist-packages (from fairseq) (2.2.1)\n","Collecting omegaconf<2.1\n","  Downloading omegaconf-2.0.6-py3-none-any.whl (36 kB)\n","Requirement already satisfied: cffi in /usr/local/lib/python3.7/dist-packages (from fairseq) (1.15.1)\n","Collecting hydra-core<1.1,>=1.0.7\n","  Downloading hydra_core-1.0.7-py3-none-any.whl (123 kB)\n","\u001b[K     |████████████████████████████████| 123 kB 70.5 MB/s \n","\u001b[?25hRequirement already satisfied: cython in /usr/local/lib/python3.7/dist-packages (from fairseq) (0.29.32)\n","Requirement already satisfied: torchaudio>=0.8.0 in /usr/local/lib/python3.7/dist-packages (from fairseq) (0.12.1+cu113)\n","Requirement already satisfied: numpy in /usr/local/lib/python3.7/dist-packages (from fairseq) (1.21.6)\n","Requirement already satisfied: importlib-resources in /usr/local/lib/python3.7/dist-packages (from hydra-core<1.1,>=1.0.7->fairseq) (5.9.0)\n","Collecting antlr4-python3-runtime==4.8\n","  Downloading antlr4-python3-runtime-4.8.tar.gz (112 kB)\n","\u001b[K     |████████████████████████████████| 112 kB 71.1 MB/s \n","\u001b[?25hRequirement already satisfied: typing-extensions in /usr/local/lib/python3.7/dist-packages (from omegaconf<2.1->fairseq) (4.1.1)\n","Requirement already satisfied: PyYAML>=5.1.* in /usr/local/lib/python3.7/dist-packages (from omegaconf<2.1->fairseq) (6.0)\n","Requirement already satisfied: colorama in /usr/local/lib/python3.7/dist-packages (from sacrebleu>=1.4.12->fairseq) (0.4.5)\n","Requirement already satisfied: lxml in /usr/local/lib/python3.7/dist-packages (from sacrebleu>=1.4.12->fairseq) (4.9.1)\n","Requirement already satisfied: portalocker in /usr/local/lib/python3.7/dist-packages (from sacrebleu>=1.4.12->fairseq) (2.5.1)\n","Requirement already satisfied: tabulate>=0.8.9 in /usr/local/lib/python3.7/dist-packages (from sacrebleu>=1.4.12->fairseq) (0.8.10)\n","Requirement already satisfied: pycparser in /usr/local/lib/python3.7/dist-packages (from cffi->fairseq) (2.21)\n","Requirement already satisfied: zipp>=3.1.0 in /usr/local/lib/python3.7/dist-packages (from importlib-resources->hydra-core<1.1,>=1.0.7->fairseq) (3.8.1)\n","Building wheels for collected packages: antlr4-python3-runtime\n","  Building wheel for antlr4-python3-runtime (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for antlr4-python3-runtime: filename=antlr4_python3_runtime-4.8-py3-none-any.whl size=141230 sha256=136e3e4adf1f0895ce958ddce8c3e4e359831563e9b4089070948cc62edfe86a\n","  Stored in directory: /root/.cache/pip/wheels/ca/33/b7/336836125fc9bb4ceaa4376d8abca10ca8bc84ddc824baea6c\n","Successfully built antlr4-python3-runtime\n","Installing collected packages: omegaconf, antlr4-python3-runtime, hydra-core, bitarray, fairseq\n","Successfully installed antlr4-python3-runtime-4.8 bitarray-2.6.0 fairseq-0.12.2 hydra-core-1.0.7 omegaconf-2.0.6\n"]},{"output_type":"stream","name":"stderr","text":["WARNING:root:Triton is not available, some optimizations will not be enabled.\n","Error No module named 'triton'\n","WARNING:root:Triton is not available, some optimizations will not be enabled.\n","Error No module named 'triton'\n"]}],"source":["# add fairseq folder to python path\n","!pip install fairseq\n","import os\n","os.environ['PYTHONPATH'] += \":/content/fairseq/\"\n","# sanity check to see if fairseq is installed\n","from fairseq import checkpoint_utils, distributed_utils, options, tasks, utils"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"E_4JxNdRlPQB","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1664198138334,"user_tz":-330,"elapsed":10,"user":{"displayName":"Krithika Swaminathan","userId":"06780295584669090751"}},"outputId":"ab6c9ed3-3998-4d8a-c7f5-2baa81172ab8"},"outputs":[{"output_type":"stream","name":"stdout","text":["--2022-09-26 13:15:38--  https://storage.googleapis.com/samanantar-public/V0.3/models/indic-en.zip\n","Resolving storage.googleapis.com (storage.googleapis.com)... 74.125.202.128, 74.125.69.128, 64.233.183.128, ...\n","Connecting to storage.googleapis.com (storage.googleapis.com)|74.125.202.128|:443... connected.\n","HTTP request sent, awaiting response... 403 Forbidden\n","2022-09-26 13:15:38 ERROR 403: Forbidden.\n","\n","unzip:  cannot find or open indic-en.zip, indic-en.zip.zip or indic-en.zip.ZIP.\n","/content/indicTrans\n"]}],"source":["# download the indictrans model\n","\n","\n","# downloading the indic-en model\n","!wget https://storage.googleapis.com/samanantar-public/V0.3/models/indic-en.zip\n","!unzip indic-en.zip\n","\n","# downloading the en-indic model\n","# !wget https://storage.googleapis.com/samanantar-public/V0.3/models/en-indic.zip\n","# !unzip en-indic.zip\n","\n","# # downloading the indic-indic model\n","# !wget https://storage.googleapis.com/samanantar-public/V0.3/models/m2m.zip\n","# !unzip m2m.zip\n","\n","%cd indicTrans"]},{"cell_type":"code","source":["from indicTrans.inference.engine import Model"],"metadata":{"id":"jTYz_iNZ8Nyh"},"execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"metadata":{"id":"yTnWbHqY01-B","colab":{"base_uri":"https://localhost:8080/","height":329},"executionInfo":{"status":"error","timestamp":1664198418511,"user_tz":-330,"elapsed":369,"user":{"displayName":"Krithika Swaminathan","userId":"06780295584669090751"}},"outputId":"05e5e58f-c4f6-41a3-d04a-0e0bc850703b"},"outputs":[{"output_type":"stream","name":"stdout","text":["Initializing vocab and bpe\n"]},{"output_type":"error","ename":"FileNotFoundError","evalue":"ignored","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mFileNotFoundError\u001b[0m                         Traceback (most recent call last)","\u001b[0;32m<ipython-input-9-cd2b68f6404a>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0mindic2en_model\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mModel\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mexpdir\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0;34m'../indic-en'\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;32m/content/indicTrans/inference/engine.py\u001b[0m in \u001b[0;36m__init__\u001b[0;34m(self, expdir)\u001b[0m\n\u001b[1;32m     80\u001b[0m         \u001b[0mprint\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m\"Initializing vocab and bpe\"\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     81\u001b[0m         self.vocabulary = read_vocabulary(\n\u001b[0;32m---> 82\u001b[0;31m             \u001b[0mcodecs\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mopen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34mf\"{expdir}/vocab/vocab.SRC\"\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mencoding\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0;34m\"utf-8\"\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m5\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m     83\u001b[0m         )\n\u001b[1;32m     84\u001b[0m         self.bpe = BPE(\n","\u001b[0;32m/usr/lib/python3.7/codecs.py\u001b[0m in \u001b[0;36mopen\u001b[0;34m(filename, mode, encoding, errors, buffering)\u001b[0m\n\u001b[1;32m    902\u001b[0m         \u001b[0;31m# Force opening of the file in binary mode\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    903\u001b[0m         \u001b[0mmode\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mmode\u001b[0m \u001b[0;34m+\u001b[0m \u001b[0;34m'b'\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 904\u001b[0;31m     \u001b[0mfile\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mbuiltins\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mopen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mfilename\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mmode\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mbuffering\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    905\u001b[0m     \u001b[0;32mif\u001b[0m \u001b[0mencoding\u001b[0m \u001b[0;32mis\u001b[0m \u001b[0;32mNone\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    906\u001b[0m         \u001b[0;32mreturn\u001b[0m \u001b[0mfile\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mFileNotFoundError\u001b[0m: [Errno 2] No such file or directory: '../indic-en/vocab/vocab.SRC'"]}],"source":["indic2en_model = Model(expdir='../indic-en')"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"QTp2NOgQ__sB"},"outputs":[],"source":["ta_sents = ['அவனுக்கு நம்மைப் தெரியும் என்று தோன்றுகிறது',\n","            \"நாங்கள் உன்னைத் பின்பற்றுவோம் (அ) தொடர்வோம். \",\n","            'உங்களுக்கு உங்கள் அருகில் இருக்கும் ஒருவருக்கோ இத்தகைய அறிகுறிகள் தென்பட்டால், வீட்டிலேயே இருப்பது, கொரோனா வைரஸ் தொற்று பிறருக்கு வராமல் தடுக்க உதவும்.']\n","\n","\n","indic2en_model.batch_translate(ta_sents, 'ta', 'en')\n","\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"VFXrCNZGEN7Z"},"outputs":[],"source":["\n","ta_paragraph = \"\"\"இத்தொற்றுநோய் உலகளாவிய சமூக மற்றும் பொருளாதார சீர்குலைவை ஏற்படுத்தியுள்ளது.இதனால் பெரும் பொருளாதார மந்தநிலைக்குப் பின்னர் உலகளவில் மிகப்பெரிய மந்தநிலை ஏற்பட்டுள்ளது. இது விளையாட்டு,மத, அரசியல் மற்றும் கலாச்சார நிகழ்வுகளை ஒத்திவைக்க அல்லது ரத்து செய்ய வழிவகுத்தது.\n","அச்சம் காரணமாக முகக்கவசம், கிருமிநாசினி உள்ளிட்ட பொருட்களை அதிக நபர்கள் வாங்கியதால் விநியோகப் பற்றாக்குறை ஏற்பட்டது.\"\"\"\n","\n","indic2en_model.translate_paragraph(ta_paragraph, 'ta', 'en')"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Hi_D7s_VIjis"},"outputs":[],"source":["import pandas as pd\n","import numpy as np\n","import nltk\n","from sklearn.model_selection import GridSearchCV, cross_val_score, StratifiedKFold, learning_curve\n","from sklearn.naive_bayes import MultinomialNB\n","from xgboost import XGBClassifier\n","from sklearn.linear_model import Perceptron\n","from tqdm import tqdm\n","import matplotlib.pyplot as plt\n","import seaborn as sns\n","import tensorflow as tf\n","import keras"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"kDi1YtDPaoT5"},"outputs":[],"source":["import gensim\n","from gensim.utils import simple_preprocess\n","from gensim.parsing.preprocessing import STOPWORDS"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"XEO_GOvMW1Iy"},"outputs":[],"source":["#train = pd.read_csv('ta-en-misogyny-train.csv',sep='\\t', names = [\"category\", \"text\"])\n","#train = train.dropna()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"W3o_mY8tYDCN"},"outputs":[],"source":["#test = pd.read_csv('ta-en-misogyny-dev.csv',sep='\\t', names = [\"category\", \"text\"])\n","#test = test.dropna()"]}],"metadata":{"accelerator":"GPU","colab":{"provenance":[{"file_id":"https://github.com/AI4Bharat/indicTrans/blob/main/indicTrans_python_interface.ipynb","timestamp":1664197775222}]},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}